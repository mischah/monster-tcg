<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monster TCG - Sammelkartenspiel</title>
    <link rel="stylesheet" href="./styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
</head>
<body>
    <div class="game-container">
        <header class="game-header">
            <h1>🔥 Monster TCG 🔥</h1>
            <div class="header-stats">
                <div class="stat">
                    <span class="stat-label">Münzen:</span>
                    <span id="coins" class="stat-value">100</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Karten:</span>
                    <span id="card-count" class="stat-value">5</span>
                </div>
                <div class="save-controls">
                    <button id="manual-save-btn" class="save-btn" title="Manuell speichern">💾</button>
                    <button id="export-save-btn" class="save-btn" title="Spielstand exportieren">📤</button>
                    <button id="reset-game-btn" class="save-btn reset" title="Spiel zurücksetzen">🔄</button>
                </div>
            </div>
        </header>

        <nav class="game-nav">
            <button class="nav-btn active" data-tab="collection">📚 Sammlung</button>
            <button class="nav-btn" data-tab="shop">🛒 Shop</button>
            <button class="nav-btn" data-tab="battle">⚔️ Arena</button>
            <button class="nav-btn" data-tab="deck">🎴 Deck</button>
        </nav>

        <main class="game-content">
            <!-- Kartensammlung -->
            <section id="collection" class="tab-content active">
                <div class="collection-header">
                    <h2>Deine Kartensammlung</h2>
                    <div class="collection-stats">
                        <div class="collection-stat">
                            <span class="stat-emoji">📊</span>
                            <span id="total-cards">0</span> Karten
                        </div>
                        <div class="collection-stat">
                            <span class="stat-emoji">🏆</span>
                            <span id="legendary-cards">0</span> Legendäre
                        </div>
                        <div class="collection-stat">
                            <span class="stat-emoji">💰</span>
                            <span id="collection-value">0</span> Wert
                        </div>
                    </div>
                </div>
                <div class="filter-bar">
                    <select id="rarity-filter">
                        <option value="all">Alle Seltenheiten</option>
                        <option value="common">Häufig</option>
                        <option value="rare">Selten</option>
                        <option value="epic">Episch</option>
                        <option value="legendary">Legendär</option>
                    </select>
                    <input type="text" id="search-cards" placeholder="Karten suchen...">
                </div>
                <div id="card-grid" class="card-grid"></div>
            </section>

            <!-- Shop -->
            <section id="shop" class="tab-content">
                <h2>🛒 Kartenshop - Booster Display</h2>
                
                <!-- Basis-Booster Display -->
                <div class="pack-display-section">
                    <div class="pack-type-header basic-header">
                        <h3>📦 Basis-Booster Display</h3>
                        <div class="pack-info-compact">
                            <span class="pack-price">💰 50 Münzen</span>
                            <span class="pack-description">5 Karten • Standard Drops</span>
                        </div>
                    </div>
                    <div class="pack-display basic-display" data-pack-type="basic">
                        <!-- 30 Basis-Booster werden hier generiert -->
                    </div>
                </div>

                <!-- Premium-Booster Display -->
                <div class="pack-display-section">
                    <div class="pack-type-header premium-header">
                        <h3>✨ Premium-Booster Display</h3>
                        <div class="pack-info-compact">
                            <span class="pack-price">💰 100 Münzen</span>
                            <span class="pack-description">5 Karten • Garantiert 1 Seltene+</span>
                        </div>
                    </div>
                    <div class="pack-display premium-display" data-pack-type="premium">
                        <!-- 30 Premium-Booster werden hier generiert -->
                    </div>
                </div>

                <!-- Legendärer-Booster Display -->
                <div class="pack-display-section">
                    <div class="pack-type-header legendary-header">
                        <h3>🌟 Legendärer-Booster Display</h3>
                        <div class="pack-info-compact">
                            <span class="pack-price">💰 250 Münzen</span>
                            <span class="pack-description">3 Karten • Garantiert 1 Legendäre</span>
                        </div>
                    </div>
                    <div class="pack-display legendary-display" data-pack-type="legendary">
                        <!-- 30 Legendäre-Booster werden hier generiert -->
                    </div>
                </div>

                <!-- Pack Information Panel -->
                <div class="pack-info-panel">
                    <div class="panel-header">
                        <h4>📊 Drop-Raten Information</h4>
                        <div class="panel-buttons">
                            <input type="file" id="import-save-input" accept=".json" style="display: none;">
                            <button id="import-save-btn" class="restock-btn import-btn">📥 Import</button>
                            <button id="restock-btn" class="restock-btn">🔄 Shop Auffüllen</button>
                        </div>
                    </div>
                    <div class="drop-rates">
                        <div class="rate-info basic-rate">
                            <strong>📦 Basis-Booster:</strong>
                            <span>60% Häufig • 30% Selten • 9% Episch • 1% Legendär</span>
                        </div>
                        <div class="rate-info premium-rate">
                            <strong>✨ Premium-Booster:</strong>
                            <span>40% Häufig • 40% Selten • 15% Episch • 5% Legendär</span>
                        </div>
                        <div class="rate-info legendary-rate">
                            <strong>🌟 Legendärer-Booster:</strong>
                            <span>33% Episch • 33% Legendär • 34% Ultra-Selten</span>
                        </div>
                    </div>
                    <div class="shop-stats">
                        <div class="stat-item">
                            <span class="stat-label">Verfügbare Basis-Packs:</span>
                            <span id="basic-count" class="stat-value">30</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Verfügbare Premium-Packs:</span>
                            <span id="premium-count" class="stat-value">30</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Verfügbare Legendär-Packs:</span>
                            <span id="legendary-count" class="stat-value">30</span>
                        </div>
                    </div>
                    
                    <!-- Speicher-Status -->
                    <div class="save-status">
                        <div class="save-status-item">
                            <span class="save-label">💾 Letzter Speichervorgang:</span>
                            <span id="last-save-time" class="save-time">Noch nicht gespeichert</span>
                        </div>
                        <div class="save-status-item">
                            <span class="save-label">🎮 Auto-Save:</span>
                            <span id="auto-save-status" class="save-status-active">Aktiv</span>
                        </div>
                    </div>
                </div>

                <!-- Pack Opening Animation Bereich -->
                <div id="pack-opening" class="pack-opening hidden">
                    <div class="pack-opening-content">
                        <h3>🎉 Pack wird geöffnet...</h3>
                        <div class="opening-animation">
                            <div class="pack-spinner">📦</div>
                        </div>
                        <div id="revealed-cards" class="revealed-cards"></div>
                        <button id="collect-cards" class="collect-btn hidden">Karten einsammeln</button>
                    </div>
                </div>
            </section>

            <!-- Arena/Kampf -->
            <section id="battle" class="tab-content">
                <h2>Kampfarena</h2>
                <div class="battle-area">
                    <div class="player-side">
                        <h3>Dein Monster</h3>
                        <div id="player-monster" class="battle-monster"></div>
                        <div class="battle-controls">
                            <select id="monster-select">
                                <option value="">Monster wählen...</option>
                            </select>
                            <button id="attack-btn" disabled>Angreifen!</button>
                        </div>
                    </div>
                    <div class="vs-section">
                        <div class="vs-text">VS</div>
                        <div class="battle-log" id="battle-log"></div>
                    </div>
                    <div class="enemy-side">
                        <h3>Gegner Monster</h3>
                        <div id="enemy-monster" class="battle-monster"></div>
                        <button id="find-opponent-btn">Gegner finden</button>
                    </div>
                </div>
            </section>

            <!-- Deck Builder -->
            <section id="deck" class="tab-content">
                <div class="deck-builder-header">
                    <h2>🎴 Deck Builder</h2>
                    <div class="deck-actions">
                        <button id="clear-deck-btn" class="deck-action-btn clear">🗑️ Deck leeren</button>
                        <button id="auto-build-deck-btn" class="deck-action-btn auto">🤖 Auto-Build</button>
                        <button id="save-deck-btn" class="deck-action-btn save">💾 Deck speichern</button>
                    </div>
                </div>

                <div class="deck-builder">
                    <!-- Aktuelles Deck -->
                    <div class="current-deck-section">
                        <div class="deck-header">
                            <h3>🎯 Aktuelles Kampf-Deck</h3>
                            <div class="deck-stats">
                                <span id="deck-count" class="deck-count">0</span>/<span class="deck-max">10</span> Karten
                                <div class="deck-power">
                                    <span class="power-label">⚡ Deck-Power:</span>
                                    <span id="deck-power" class="power-value">0</span>
                                </div>
                            </div>
                        </div>
                        
                        <div id="deck-cards" class="deck-cards">
                            <div class="empty-deck-message">
                                <div class="empty-icon">🎴</div>
                                <p>Dein Deck ist leer!</p>
                                <p class="empty-hint">Klicke auf Karten aus deiner Sammlung, um sie hinzuzufügen.</p>
                            </div>
                        </div>
                        
                        <!-- Deck-Analyse -->
                        <div class="deck-analysis">
                            <h4>📊 Deck-Analyse</h4>
                            <div class="analysis-stats">
                                <div class="stat-group">
                                    <span class="stat-label">Durchschnittlicher Angriff:</span>
                                    <span id="avg-attack" class="stat-value">0</span>
                                </div>
                                <div class="stat-group">
                                    <span class="stat-label">Durchschnittliche Verteidigung:</span>
                                    <span id="avg-defense" class="stat-value">0</span>
                                </div>
                                <div class="stat-group">
                                    <span class="stat-label">Durchschnittliche Lebenspunkte:</span>
                                    <span id="avg-health" class="stat-value">0</span>
                                </div>
                            </div>
                            <div class="rarity-distribution">
                                <h5>Seltenheits-Verteilung:</h5>
                                <div class="rarity-bars">
                                    <div class="rarity-bar common">
                                        <span class="rarity-label">Häufig</span>
                                        <div class="rarity-progress">
                                            <div id="common-bar" class="progress-fill"></div>
                                        </div>
                                        <span id="common-count" class="rarity-count">0</span>
                                    </div>
                                    <div class="rarity-bar rare">
                                        <span class="rarity-label">Selten</span>
                                        <div class="rarity-progress">
                                            <div id="rare-bar" class="progress-fill"></div>
                                        </div>
                                        <span id="rare-count" class="rarity-count">0</span>
                                    </div>
                                    <div class="rarity-bar epic">
                                        <span class="rarity-label">Episch</span>
                                        <div class="rarity-progress">
                                            <div id="epic-bar" class="progress-fill"></div>
                                        </div>
                                        <span id="epic-count" class="rarity-count">0</span>
                                    </div>
                                    <div class="rarity-bar legendary">
                                        <span class="rarity-label">Legendär</span>
                                        <div class="rarity-progress">
                                            <div id="legendary-bar" class="progress-fill"></div>
                                        </div>
                                        <span id="legendary-count" class="rarity-count">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Kartensammlung für Deck-Building -->
                    <div class="deck-collection-section">
                        <div class="collection-header">
                            <h3>📚 Kartensammlung</h3>
                            <div class="collection-filters">
                                <select id="deck-rarity-filter">
                                    <option value="all">Alle Seltenheiten</option>
                                    <option value="common">Häufig</option>
                                    <option value="rare">Selten</option>
                                    <option value="epic">Episch</option>
                                    <option value="legendary">Legendär</option>
                                </select>
                                <select id="deck-sort-filter">
                                    <option value="name">Nach Name</option>
                                    <option value="attack">Nach Angriff</option>
                                    <option value="defense">Nach Verteidigung</option>
                                    <option value="health">Nach Lebenspunkten</option>
                                    <option value="rarity">Nach Seltenheit</option>
                                </select>
                            </div>
                        </div>
                        
                        <div id="deck-builder-cards" class="deck-builder-cards"></div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Card Details Modal -->
    <div id="card-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modal-card-details"></div>
        </div>
    </div>

    <script type="module" src="./script.js"></script>
</body>
</html>
